name: SwiftModule
fileGroups: [module.yml, project.yml]

options:
  defaultConfig: Release
  bundleIdPrefix: com.acecilia
  transitivelyLinkDependencies: true
  createIntermediateGroups: true
  minimumXcodeGenVersion: 2.10.1

targets:
  SwiftModule:
    type: framework.static
    platform: iOS
    sources:
      - src/main/swift
    dependencies:
      - framework: SwiftModule2.framework
        implicit: true
      - framework: ../../../../../../../../Carthage/Build/iOS/FileKit.framework
    info:
      path: SupportingFiles/SwiftModule/Info.plist

  SwiftModuleTests:
    type: bundle.unit-test
    platform: iOS
    settings:
      base:
        # Needed for getting proper test coverage percentages when using static frameworks
        OTHER_LDFLAGS: -all_load
    sources:
      - src/test/swift
    dependencies:
      - target: SwiftModule
      - framework: SwiftModule3.framework
        implicit: true
    info:
      path: SupportingFiles/SwiftModuleTests/Info.plist

schemes:
  SwiftModule:
    build:
      targets:
        SwiftModule: all
    test:
      gatherCoverageData: true
      targets:
        - name: SwiftModuleTests
          randomExecutionOrder: true
